{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ajits\\\\fastapi-react-chatbot\\\\frontend\\\\src\\\\components\\\\Chat.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence, LazyMotion, domAnimation } from 'framer-motion';\nimport { PaperAirplaneIcon, Bars3Icon, UserCircleIcon, ArrowLeftOnRectangleIcon, Cog6ToothIcon, UserGroupIcon, MicrophoneIcon, SpeakerWaveIcon, SpeakerXMarkIcon } from '@heroicons/react/24/solid';\nimport MessageBubble from './MessageBubble';\nimport TypingIndicator from './TypingIndicator';\nimport VoiceIndicator from './VoiceIndicator';\nimport { CharacterSelect } from './CharacterSelect';\nimport { dropdownVariants } from '../styles/variants';\nimport { fetchCharacters, streamMessage, fetchChatHistory } from '../services/api';\nimport { logout } from '../services/auth';\nimport { useSpeech } from '../hooks/useSpeech';\n\n// Using Character interface imported from API service\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Chat = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [characters, setCharacters] = useState([]);\n  const [selectedCharacter, setSelectedCharacter] = useState(null);\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n  const [isUserMenuOpen, setIsUserMenuOpen] = useState(false);\n  const [chatHistory, setChatHistory] = useState([]);\n  const [selectedChat, setSelectedChat] = useState(null);\n  const [isCharacterSelectOpen, setIsCharacterSelectOpen] = useState(false);\n  const [isSpeechEnabled, setIsSpeechEnabled] = useState(true);\n  const {\n    startListening,\n    stopListening,\n    speak,\n    isListening,\n    isSpeaking,\n    error: speechError\n  } = useSpeech({\n    onSpeechResult: text => {\n      setInput(text);\n      // Auto-send message when received from speech\n      handleSendMessage(new Event('submit'));\n    },\n    onSpeechEnd: () => {\n      // Handle any cleanup needed when speech recognition ends\n    }\n  });\n  const messagesEndRef = useRef(null);\n  const dropdownRef = useRef(null);\n  const userMenuRef = useRef(null);\n  const scrollToBottom = useCallback(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, []);\n  useEffect(() => {\n    const defaultAssistant = {\n      id: 0,\n      name: 'AI Assistant',\n      movie: 'Default',\n      chat_style: 'helpful and friendly',\n      example_responses: [],\n      created_at: new Date().toISOString()\n    };\n    setSelectedCharacter(defaultAssistant);\n    setMessages([{\n      id: 'welcome',\n      text: 'How can I help you today?',\n      isUser: false,\n      character: defaultAssistant,\n      timestamp: new Date()\n    }]);\n    loadCharacters();\n    loadChatHistory();\n    const handleClickOutside = event => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setIsDropdownOpen(false);\n      }\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target)) {\n        setIsUserMenuOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, isLoading, scrollToBottom]);\n  const loadCharacters = async () => {\n    try {\n      const data = await fetchCharacters();\n      setCharacters(data);\n    } catch (error) {\n      setError('Failed to load characters');\n      console.error('Error fetching characters:', error);\n    }\n  };\n  const loadChatHistory = async selectedCharacterId => {\n    try {\n      const userId = 1; // TODO: Get from auth context\n      const chatMessages = await fetchChatHistory(userId, selectedCharacterId);\n\n      // Convert the messages to the format expected by the component\n      const formattedMessages = chatMessages.map(msg => ({\n        id: msg.id.toString(),\n        text: msg.message,\n        isUser: !msg.is_bot,\n        character: characters.find(c => c.id === msg.character_id),\n        timestamp: new Date(msg.timestamp)\n      }));\n      setMessages(formattedMessages);\n    } catch (error) {\n      console.error('Error loading chat history:', error);\n      setError('Failed to load chat history');\n    }\n  };\n  const handleLogout = () => {\n    logout();\n  };\n  const handleSettings = () => {\n    console.log('Opening settings...');\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (input.trim() && !isLoading) {\n      const userMessageId = Date.now().toString();\n      const userMessage = {\n        text: input,\n        isUser: true,\n        id: userMessageId,\n        character: selectedCharacter || undefined,\n        timestamp: new Date()\n      };\n      const botMessageId = (Date.now() + 1).toString();\n      setMessages(prev => [...prev, userMessage, {\n        text: '',\n        isUser: false,\n        id: botMessageId,\n        isStreaming: true,\n        character: selectedCharacter || undefined,\n        timestamp: new Date()\n      }]);\n      setInput('');\n      setIsLoading(true);\n      setError(null);\n      try {\n        let fullResponse = '';\n        await streamMessage({\n          message: input,\n          character_id: selectedCharacter === null || selectedCharacter === void 0 ? void 0 : selectedCharacter.id,\n          user_id: 1\n        }, data => {\n          if (data.error) {\n            setError(data.error);\n            setMessages(prev => prev.filter(msg => msg.id !== botMessageId));\n            setIsLoading(false);\n          } else {\n            fullResponse += data.text || '';\n            setMessages(prev => prev.map(msg => msg.id === botMessageId ? {\n              ...msg,\n              text: fullResponse,\n              isStreaming: !data.done\n            } : msg));\n            if (data.done) {\n              setIsLoading(false);\n              if (isSpeechEnabled && fullResponse) {\n                speak(fullResponse);\n              }\n            }\n            scrollToBottom();\n          }\n        });\n      } catch (error) {\n        const errorMessage = error instanceof Error ? error.message : 'Failed to send message';\n        setError(errorMessage);\n        console.error('Error sending message:', error);\n        setIsLoading(false);\n      }\n    }\n  };\n  const handleCharacterSelect = async character => {\n    setSelectedCharacter(character);\n    setIsCharacterSelectOpen(false);\n    try {\n      // Load chat history for the selected character\n      await loadChatHistory(character.id);\n\n      // Add the character switch message\n      setMessages(prev => [...prev, {\n        id: Date.now().toString(),\n        text: character.id === 0 ? \"Switched to AI Assistant. How can I help you?\" : `Switched to ${character.name} from ${character.movie}. How can I assist you?`,\n        isUser: false,\n        character: character,\n        timestamp: new Date()\n      }]);\n    } catch (error) {\n      console.error('Error loading chat history:', error);\n      setError('Failed to load chat history');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(LazyMotion, {\n    features: domAnimation,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex h-screen bg-gray-900\",\n      children: [/*#__PURE__*/_jsxDEV(motion.div, {\n        initial: {\n          x: isSidebarOpen ? 0 : -320\n        },\n        animate: {\n          x: isSidebarOpen ? 0 : -320\n        },\n        transition: {\n          type: \"spring\",\n          stiffness: 300,\n          damping: 30\n        },\n        className: \"w-80 bg-gray-800 border-r border-gray-700 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 border-b border-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold text-white\",\n            children: \"Chat History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-y-auto p-4\",\n          children: chatHistory.map(chat => /*#__PURE__*/_jsxDEV(motion.button, {\n            whileHover: {\n              backgroundColor: 'rgba(75, 85, 99, 0.4)'\n            },\n            onClick: () => setSelectedChat(chat.id),\n            className: `w-full p-3 rounded-lg mb-2 text-left ${selectedChat === chat.id ? 'bg-gray-700' : 'hover:bg-gray-700'} transition-colors duration-200`,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-white font-medium\",\n              children: chat.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-400 text-sm truncate\",\n              children: chat.lastMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-500 text-xs\",\n              children: chat.timestamp.toLocaleDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 33\n            }, this)]\n          }, chat.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-16 border-b border-gray-700 flex items-center justify-between px-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsSidebarOpen(!isSidebarOpen),\n            className: \"p-2 hover:bg-gray-700 rounded-lg transition-colors duration-200\",\n            children: /*#__PURE__*/_jsxDEV(Bars3Icon, {\n              className: \"w-6 h-6 text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsCharacterSelectOpen(true),\n            className: \"flex items-center space-x-2 p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors duration-200 text-white\",\n            children: [/*#__PURE__*/_jsxDEV(UserGroupIcon, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: selectedCharacter ? selectedCharacter.name : 'Select Character'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            ref: userMenuRef,\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setIsUserMenuOpen(!isUserMenuOpen),\n              className: \"p-2 hover:bg-gray-700 rounded-full transition-colors duration-200\",\n              children: /*#__PURE__*/_jsxDEV(UserCircleIcon, {\n                className: \"w-8 h-8 text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n              children: isUserMenuOpen && /*#__PURE__*/_jsxDEV(motion.div, {\n                variants: dropdownVariants,\n                initial: \"hidden\",\n                animate: \"visible\",\n                exit: \"hidden\",\n                className: \"absolute right-0 mt-2 w-48 bg-gray-700 rounded-lg shadow-xl z-10\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"py-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleSettings,\n                    className: \"w-full px-4 py-2 text-left text-white hover:bg-gray-600 transition-colors duration-200 flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(Cog6ToothIcon, {\n                      className: \"w-5 h-5 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 327,\n                      columnNumber: 49\n                    }, this), \"Settings\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: handleLogout,\n                    className: \"w-full px-4 py-2 text-left text-white hover:bg-gray-600 transition-colors duration-200 flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(ArrowLeftOnRectangleIcon, {\n                      className: \"w-5 h-5 mr-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 334,\n                      columnNumber: 49\n                    }, this), \"Logout\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 330,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-y-auto p-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n              initial: false,\n              children: messages.map(msg => /*#__PURE__*/_jsxDEV(MessageBubble, {\n                message: msg.text,\n                isUser: msg.isUser,\n                isTyping: msg.isStreaming,\n                character: msg.character\n              }, msg.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 37\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 29\n            }, this), (isListening || isSpeaking) && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center\",\n              children: [/*#__PURE__*/_jsxDEV(VoiceIndicator, {\n                isActive: isListening,\n                type: \"listening\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 359,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(VoiceIndicator, {\n                isActive: isSpeaking,\n                type: \"speaking\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 33\n            }, this), isLoading && !messages.some(msg => msg.isStreaming) && /*#__PURE__*/_jsxDEV(motion.div, {\n              initial: {\n                opacity: 0\n              },\n              animate: {\n                opacity: 1\n              },\n              exit: {\n                opacity: 0\n              },\n              children: /*#__PURE__*/_jsxDEV(TypingIndicator, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 33\n            }, this), error && /*#__PURE__*/_jsxDEV(motion.div, {\n              initial: {\n                opacity: 0\n              },\n              animate: {\n                opacity: 1\n              },\n              className: \"text-red-500 text-sm p-2 rounded-lg bg-red-500/10\",\n              children: error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: messagesEndRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 border-t border-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSendMessage,\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(motion.button, {\n                type: \"button\",\n                whileHover: {\n                  scale: 1.05\n                },\n                whileTap: {\n                  scale: 0.95\n                },\n                onClick: () => {\n                  if (isListening) {\n                    stopListening();\n                  } else {\n                    startListening();\n                  }\n                },\n                className: `p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-colors duration-200 ${isListening ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`,\n                children: /*#__PURE__*/_jsxDEV(MicrophoneIcon, {\n                  className: \"w-6 h-6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n                type: \"button\",\n                whileHover: {\n                  scale: 1.05\n                },\n                whileTap: {\n                  scale: 0.95\n                },\n                onClick: () => setIsSpeechEnabled(!isSpeechEnabled),\n                className: `p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-colors duration-200 ${isSpeechEnabled ? 'bg-purple-600 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'}`,\n                children: isSpeechEnabled ? /*#__PURE__*/_jsxDEV(SpeakerWaveIcon, {\n                  className: \"w-6 h-6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 425,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(SpeakerXMarkIcon, {\n                  className: \"w-6 h-6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: input,\n              onChange: e => setInput(e.target.value),\n              placeholder: isListening ? 'Listening...' : 'Type your message...',\n              className: \"flex-1 p-3 rounded-lg bg-gray-700 text-white placeholder-gray-400 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n              type: \"submit\",\n              whileHover: {\n                scale: 1.05\n              },\n              whileTap: {\n                scale: 0.95\n              },\n              disabled: isLoading || !input.trim(),\n              className: \"p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed\",\n              children: /*#__PURE__*/_jsxDEV(PaperAirplaneIcon, {\n                className: \"w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CharacterSelect, {\n      isOpen: isCharacterSelectOpen,\n      onCharacterSelect: handleCharacterSelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 257,\n    columnNumber: 9\n  }, this);\n};\n_s(Chat, \"V56utMs64fqvWvz6wthh3NT9psc=\", false, function () {\n  return [useSpeech];\n});\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","motion","AnimatePresence","LazyMotion","domAnimation","PaperAirplaneIcon","Bars3Icon","UserCircleIcon","ArrowLeftOnRectangleIcon","Cog6ToothIcon","UserGroupIcon","MicrophoneIcon","SpeakerWaveIcon","SpeakerXMarkIcon","MessageBubble","TypingIndicator","VoiceIndicator","CharacterSelect","dropdownVariants","fetchCharacters","streamMessage","fetchChatHistory","logout","useSpeech","jsxDEV","_jsxDEV","Chat","_s","messages","setMessages","input","setInput","characters","setCharacters","selectedCharacter","setSelectedCharacter","isDropdownOpen","setIsDropdownOpen","isLoading","setIsLoading","error","setError","isSidebarOpen","setIsSidebarOpen","isUserMenuOpen","setIsUserMenuOpen","chatHistory","setChatHistory","selectedChat","setSelectedChat","isCharacterSelectOpen","setIsCharacterSelectOpen","isSpeechEnabled","setIsSpeechEnabled","startListening","stopListening","speak","isListening","isSpeaking","speechError","onSpeechResult","text","handleSendMessage","Event","onSpeechEnd","messagesEndRef","dropdownRef","userMenuRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","defaultAssistant","id","name","movie","chat_style","example_responses","created_at","Date","toISOString","isUser","character","timestamp","loadCharacters","loadChatHistory","handleClickOutside","event","contains","target","document","addEventListener","removeEventListener","data","console","selectedCharacterId","userId","chatMessages","formattedMessages","map","msg","toString","message","is_bot","find","c","character_id","handleLogout","handleSettings","log","e","preventDefault","trim","userMessageId","now","userMessage","undefined","botMessageId","prev","isStreaming","fullResponse","user_id","filter","done","errorMessage","Error","handleCharacterSelect","features","children","className","div","initial","x","animate","transition","type","stiffness","damping","fileName","_jsxFileName","lineNumber","columnNumber","chat","button","whileHover","backgroundColor","onClick","title","lastMessage","toLocaleDateString","ref","variants","exit","isTyping","isActive","some","opacity","onSubmit","scale","whileTap","value","onChange","placeholder","disabled","isOpen","onCharacterSelect","_c","$RefreshReg$"],"sources":["C:/Users/ajits/fastapi-react-chatbot/frontend/src/components/Chat.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence, LazyMotion, domAnimation } from 'framer-motion';\nimport { \n    PaperAirplaneIcon, \n    ChevronDownIcon,\n    Bars3Icon,\n    UserCircleIcon,\n    ArrowLeftOnRectangleIcon,\n    Cog6ToothIcon,\n    UserGroupIcon,\n    MicrophoneIcon,\n    SpeakerWaveIcon,\n    SpeakerXMarkIcon\n} from '@heroicons/react/24/solid';\nimport MessageBubble from './MessageBubble';\nimport TypingIndicator from './TypingIndicator';\nimport VoiceIndicator from './VoiceIndicator';\nimport { CharacterSelect } from './CharacterSelect';\nimport { containerVariants, dropdownVariants } from '../styles/variants';\nimport { fetchCharacters, streamMessage, fetchChatMessages, fetchChatHistory, StreamResponse } from '../services/api';\nimport { Character } from '../services/api';\nimport { logout } from '../services/auth';\nimport { useSpeech } from '../hooks/useSpeech';\n\n// Using Character interface imported from API service\n\ninterface Message {\n    text: string;\n    isUser: boolean;\n    id: string;\n    isStreaming?: boolean;\n    character?: Character;\n    timestamp?: Date;\n}\n\ninterface ChatHistory {\n    id: string;\n    title: string;\n    lastMessage: string;\n    timestamp: Date;\n}\n\nconst Chat: React.FC = () => {\n    const [messages, setMessages] = useState<Message[]>([]);\n    const [input, setInput] = useState<string>('');\n    const [characters, setCharacters] = useState<Character[]>([]);\n    const [selectedCharacter, setSelectedCharacter] = useState<Character | null>(null);\n    const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n    const [isUserMenuOpen, setIsUserMenuOpen] = useState(false);\n    const [chatHistory, setChatHistory] = useState<ChatHistory[]>([]);\n    const [selectedChat, setSelectedChat] = useState<string | null>(null);\n    const [isCharacterSelectOpen, setIsCharacterSelectOpen] = useState(false);\n    const [isSpeechEnabled, setIsSpeechEnabled] = useState(true);\n\n    const {\n        startListening,\n        stopListening,\n        speak,\n        isListening,\n        isSpeaking,\n        error: speechError\n    } = useSpeech({\n        onSpeechResult: (text) => {\n            setInput(text);\n            // Auto-send message when received from speech\n            handleSendMessage(new Event('submit') as any);\n        },\n        onSpeechEnd: () => {\n            // Handle any cleanup needed when speech recognition ends\n        }\n    });\n\n    const messagesEndRef = useRef<HTMLDivElement>(null);\n    const dropdownRef = useRef<HTMLDivElement>(null);\n    const userMenuRef = useRef<HTMLDivElement>(null);\n\n    const scrollToBottom = useCallback(() => {\n        messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n    }, []);\n\n    useEffect(() => {\n        const defaultAssistant = {\n            id: 0,\n            name: 'AI Assistant',\n            movie: 'Default',\n            chat_style: 'helpful and friendly',\n            example_responses: [],\n            created_at: new Date().toISOString()\n        };\n        \n        setSelectedCharacter(defaultAssistant);\n        setMessages([{\n            id: 'welcome',\n            text: 'How can I help you today?',\n            isUser: false,\n            character: defaultAssistant,\n            timestamp: new Date()\n        }]);\n\n        loadCharacters();\n        loadChatHistory();\n\n        const handleClickOutside = (event: MouseEvent) => {\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n                setIsDropdownOpen(false);\n            }\n            if (userMenuRef.current && !userMenuRef.current.contains(event.target as Node)) {\n                setIsUserMenuOpen(false);\n            }\n        };\n\n        document.addEventListener('mousedown', handleClickOutside);\n        return () => document.removeEventListener('mousedown', handleClickOutside);\n    }, []);\n\n    useEffect(() => {\n        scrollToBottom();\n    }, [messages, isLoading, scrollToBottom]);\n\n    const loadCharacters = async () => {\n        try {\n            const data = await fetchCharacters();\n            setCharacters(data);\n        } catch (error) {\n            setError('Failed to load characters');\n            console.error('Error fetching characters:', error);\n        }\n    };\n\n    const loadChatHistory = async (selectedCharacterId?: number) => {\n        try {\n            const userId = 1; // TODO: Get from auth context\n            const chatMessages = await fetchChatHistory(userId, selectedCharacterId);\n            \n            // Convert the messages to the format expected by the component\n            const formattedMessages: Message[] = chatMessages.map((msg) => ({\n                id: msg.id.toString(),\n                text: msg.message,\n                isUser: !msg.is_bot,\n                character: characters.find(c => c.id === msg.character_id),\n                timestamp: new Date(msg.timestamp)\n            }));\n\n            setMessages(formattedMessages);\n        } catch (error) {\n            console.error('Error loading chat history:', error);\n            setError('Failed to load chat history');\n        }\n    };\n\n    const handleLogout = () => {\n        logout();\n    };\n\n    const handleSettings = () => {\n        console.log('Opening settings...');\n    };\n\n    const handleSendMessage = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (input.trim() && !isLoading) {\n            const userMessageId = Date.now().toString();\n            const userMessage = { \n                text: input, \n                isUser: true, \n                id: userMessageId,\n                character: selectedCharacter || undefined,\n                timestamp: new Date()\n            };\n            const botMessageId = (Date.now() + 1).toString();\n            \n            setMessages(prev => [...prev, userMessage, { \n                text: '', \n                isUser: false, \n                id: botMessageId,\n                isStreaming: true,\n                character: selectedCharacter || undefined,\n                timestamp: new Date()\n            }]);\n            setInput('');\n            setIsLoading(true);\n            setError(null);\n            \n            try {\n                let fullResponse = '';\n                \n                await streamMessage(\n                    {\n                        message: input,\n                        character_id: selectedCharacter?.id,\n                        user_id: 1\n                    },\n                    (data: StreamResponse) => {\n                        if (data.error) {\n                            setError(data.error);\n                            setMessages(prev => prev.filter(msg => msg.id !== botMessageId));\n                            setIsLoading(false);\n                        } else {\n                            fullResponse += data.text || '';\n                            setMessages(prev => prev.map(msg => \n                                msg.id === botMessageId \n                                    ? { \n                                        ...msg, \n                                        text: fullResponse,\n                                        isStreaming: !data.done \n                                    }\n                                    : msg\n                            ));\n\n                            if (data.done) {\n                                setIsLoading(false);\n                                if (isSpeechEnabled && fullResponse) {\n                                    speak(fullResponse);\n                                }\n                            }\n                            scrollToBottom();\n                        }\n                    }\n                );\n            } catch (error) {\n                const errorMessage = error instanceof Error ? error.message : 'Failed to send message';\n                setError(errorMessage);\n                console.error('Error sending message:', error);\n                setIsLoading(false);\n            }\n        }\n    };\n\n    const handleCharacterSelect = async (character: Character) => {\n        setSelectedCharacter(character);\n        setIsCharacterSelectOpen(false);\n        \n        try {\n            // Load chat history for the selected character\n            await loadChatHistory(character.id);\n            \n            // Add the character switch message\n            setMessages(prev => [...prev, {\n                id: Date.now().toString(),\n                text: character.id === 0 \n                    ? \"Switched to AI Assistant. How can I help you?\"\n                    : `Switched to ${character.name} from ${character.movie}. How can I assist you?`,\n                isUser: false,\n                character: character,\n                timestamp: new Date()\n            }]);\n        } catch (error) {\n            console.error('Error loading chat history:', error);\n            setError('Failed to load chat history');\n        }\n    };\n\n    return (\n        <LazyMotion features={domAnimation}>\n            <div className=\"flex h-screen bg-gray-900\">\n                <motion.div \n                    initial={{ x: isSidebarOpen ? 0 : -320 }}\n                    animate={{ x: isSidebarOpen ? 0 : -320 }}\n                    transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\n                    className=\"w-80 bg-gray-800 border-r border-gray-700 flex flex-col\"\n                >\n                    <div className=\"p-4 border-b border-gray-700\">\n                        <h2 className=\"text-xl font-semibold text-white\">Chat History</h2>\n                    </div>\n                    <div className=\"flex-1 overflow-y-auto p-4\">\n                        {chatHistory.map((chat) => (\n                            <motion.button\n                                key={chat.id}\n                                whileHover={{ backgroundColor: 'rgba(75, 85, 99, 0.4)' }}\n                                onClick={() => setSelectedChat(chat.id)}\n                                className={`w-full p-3 rounded-lg mb-2 text-left ${\n                                    selectedChat === chat.id ? 'bg-gray-700' : 'hover:bg-gray-700'\n                                } transition-colors duration-200`}\n                            >\n                                <h3 className=\"text-white font-medium\">{chat.title}</h3>\n                                <p className=\"text-gray-400 text-sm truncate\">{chat.lastMessage}</p>\n                                <span className=\"text-gray-500 text-xs\">\n                                    {chat.timestamp.toLocaleDateString()}\n                                </span>\n                            </motion.button>\n                        ))}\n                    </div>\n                </motion.div>\n\n                <div className=\"flex-1 flex flex-col\">\n                    <div className=\"h-16 border-b border-gray-700 flex items-center justify-between px-4\">\n                        <button\n                            onClick={() => setIsSidebarOpen(!isSidebarOpen)}\n                            className=\"p-2 hover:bg-gray-700 rounded-lg transition-colors duration-200\"\n                        >\n                            <Bars3Icon className=\"w-6 h-6 text-white\" />\n                        </button>\n\n                        <button\n                            onClick={() => setIsCharacterSelectOpen(true)}\n                            className=\"flex items-center space-x-2 p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors duration-200 text-white\"\n                        >\n                            <UserGroupIcon className=\"w-5 h-5\" />\n                            <span>{selectedCharacter ? selectedCharacter.name : 'Select Character'}</span>\n                        </button>\n\n                        <div className=\"relative\" ref={userMenuRef}>\n                            <button\n                                onClick={() => setIsUserMenuOpen(!isUserMenuOpen)}\n                                className=\"p-2 hover:bg-gray-700 rounded-full transition-colors duration-200\"\n                            >\n                                <UserCircleIcon className=\"w-8 h-8 text-white\" />\n                            </button>\n\n                            <AnimatePresence>\n                                {isUserMenuOpen && (\n                                    <motion.div\n                                        variants={dropdownVariants}\n                                        initial=\"hidden\"\n                                        animate=\"visible\"\n                                        exit=\"hidden\"\n                                        className=\"absolute right-0 mt-2 w-48 bg-gray-700 rounded-lg shadow-xl z-10\"\n                                    >\n                                        <div className=\"py-2\">\n                                            <button\n                                                onClick={handleSettings}\n                                                className=\"w-full px-4 py-2 text-left text-white hover:bg-gray-600 transition-colors duration-200 flex items-center\"\n                                            >\n                                                <Cog6ToothIcon className=\"w-5 h-5 mr-2\" />\n                                                Settings\n                                            </button>\n                                            <button\n                                                onClick={handleLogout}\n                                                className=\"w-full px-4 py-2 text-left text-white hover:bg-gray-600 transition-colors duration-200 flex items-center\"\n                                            >\n                                                <ArrowLeftOnRectangleIcon className=\"w-5 h-5 mr-2\" />\n                                                Logout\n                                            </button>\n                                        </div>\n                                    </motion.div>\n                                )}\n                            </AnimatePresence>\n                        </div>\n                    </div>\n\n                    <div className=\"flex-1 overflow-y-auto p-4\">\n                        <div className=\"space-y-4\">\n                            <AnimatePresence initial={false}>\n                                {messages.map((msg) => (\n                                    <MessageBubble\n                                        key={msg.id}\n                                        message={msg.text}\n                                        isUser={msg.isUser}\n                                        isTyping={msg.isStreaming}\n                                        character={msg.character}\n                                    />\n                                ))}\n                            </AnimatePresence>\n                            {(isListening || isSpeaking) && (\n                                <div className=\"flex justify-center\">\n                                    <VoiceIndicator \n                                        isActive={isListening}\n                                        type=\"listening\"\n                                    />\n                                    <VoiceIndicator \n                                        isActive={isSpeaking}\n                                        type=\"speaking\"\n                                    />\n                                </div>\n                            )}\n                            {isLoading && !messages.some(msg => msg.isStreaming) && (\n                                <motion.div\n                                    initial={{ opacity: 0 }}\n                                    animate={{ opacity: 1 }}\n                                    exit={{ opacity: 0 }}\n                                >\n                                    <TypingIndicator />\n                                </motion.div>\n                            )}\n                            {error && (\n                                <motion.div\n                                    initial={{ opacity: 0 }}\n                                    animate={{ opacity: 1 }}\n                                    className=\"text-red-500 text-sm p-2 rounded-lg bg-red-500/10\"\n                                >\n                                    {error}\n                                </motion.div>\n                            )}\n                            <div ref={messagesEndRef} />\n                        </div>\n                    </div>\n\n                    <div className=\"p-4 border-t border-gray-700\">\n                        <form onSubmit={handleSendMessage} className=\"flex gap-2\">\n                            <div className=\"flex gap-2\">\n                                <motion.button\n                                    type=\"button\"\n                                    whileHover={{ scale: 1.05 }}\n                                    whileTap={{ scale: 0.95 }}\n                                    onClick={() => {\n                                        if (isListening) {\n                                            stopListening();\n                                        } else {\n                                            startListening();\n                                        }\n                                    }}\n                                    className={`p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-colors duration-200 ${\n                                        isListening \n                                            ? 'bg-blue-600 text-white' \n                                            : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                                    }`}\n                                >\n                                    <MicrophoneIcon className=\"w-6 h-6\" />\n                                </motion.button>\n                                <motion.button\n                                    type=\"button\"\n                                    whileHover={{ scale: 1.05 }}\n                                    whileTap={{ scale: 0.95 }}\n                                    onClick={() => setIsSpeechEnabled(!isSpeechEnabled)}\n                                    className={`p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-colors duration-200 ${\n                                        isSpeechEnabled \n                                            ? 'bg-purple-600 text-white' \n                                            : 'bg-gray-700 text-gray-300 hover:bg-gray-600'\n                                    }`}\n                                >\n                                    {isSpeechEnabled ? (\n                                        <SpeakerWaveIcon className=\"w-6 h-6\" />\n                                    ) : (\n                                        <SpeakerXMarkIcon className=\"w-6 h-6\" />\n                                    )}\n                                </motion.button>\n                            </div>\n                            <input\n                                type=\"text\"\n                                value={input}\n                                onChange={(e) => setInput(e.target.value)}\n                                placeholder={isListening ? 'Listening...' : 'Type your message...'}\n                                className=\"flex-1 p-3 rounded-lg bg-gray-700 text-white placeholder-gray-400 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                            />\n                            <motion.button\n                                type=\"submit\"\n                                whileHover={{ scale: 1.05 }}\n                                whileTap={{ scale: 0.95 }}\n                                disabled={isLoading || !input.trim()}\n                                className=\"p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-800 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                <PaperAirplaneIcon className=\"w-6 h-6\" />\n                            </motion.button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n\n            <CharacterSelect\n                isOpen={isCharacterSelectOpen}\n                onCharacterSelect={handleCharacterSelect}\n            />\n        </LazyMotion>\n    );\n};\n\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}